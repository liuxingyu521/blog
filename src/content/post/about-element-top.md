---
title: "æ¥ç§ç§ä¸€ä¸ªå…ƒç´ çš„å„ç±»â€œtopâ€"
publishDate: 2017-11-25
description: "å…³äºå…ƒç´ çš„topå®šä½ï¼Œä½ äº†è§£å¤šå°‘Â·Â·Â· è¿˜ç­‰ä»€ä¹ˆï¼Œè·Ÿç€æˆ‘ä¸€æ¢ç©¶ç«Ÿå§ï¼"
tags: ["çŸ¥è¯†ç‚¹", "JavaScript"]
---

# å‰è¨€

æœ€è¿‘è‡ªå·±åœ¨æŠ˜è…¾åšå®¢ï¼Œå‡†å¤‡åœ¨åšå®¢ç¬”è®°é¡µé¢æ·»åŠ ä¸€ä¸ªç›®å½•ç´¢å¼•ã€‚ç®€å•åœ¨ç½‘ä¸Šçœ‹äº†äº›å…³äºåšå®¢ç›®å½•å»ºç«‹çš„ js æ’ä»¶ï¼Œæœ€ç»ˆé€‰æ‹©äº† [jekyll-table-of-contents](https://github.com/ghiculescu/jekyll-table-of-contents) è¿™ä¸ªæ’ä»¶ï¼Œå¯ä»¥æ»¡è¶³åŸºæœ¬éœ€æ±‚ã€‚

æ¥ä¸‹æ¥é—®é¢˜æ¥äº†ï¼Œæˆ‘æƒ³ç»™ç›®å½•æ·»åŠ ä¸€äº›æ•ˆæœï¼Œæ¯”å¦‚å½“é¡µé¢æ»šåŠ¨æ—¶ï¼Œæƒ³ç»™ç›®å½•åšä¸€ä¸ªç±»ä¼¼å¸é¡¶çš„æ•ˆæœï¼Œé‚£ä¹ˆéœ€è¦åœ¨ç›®å½• dom å¿«è¢«æ»šåŠ¨åˆ°å±å¹•å¤–æ—¶ç»™å®ƒæ¥ä¸ª fixed å®šä½ï¼Œå½“æ»šåŠ¨ä¸‹æ¥æ—¶å†è®©ä»–å›åˆ°åŸä½ç½®ï¼Œéšé¡µé¢æ»šåŠ¨ã€‚

æ•´ä½“æ€è·¯å°±æ˜¯ç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼Œæ¯”è¾ƒç›®å½•å…ƒç´ è·ç¦»é¡¶éƒ¨çš„é«˜åº¦å’Œé¡µé¢æ»šåŠ¨çš„é«˜åº¦ï¼Œä½†æ˜¯åœ¨æ‰¾å…ƒç´ å’Œé¡µé¢é«˜åº¦çš„æ—¶å€™é‡åˆ°äº†é—®é¢˜ï¼ŒoffsetTopï¼ŸscrollTopï¼Ÿå‚»å‚»åˆ†ä¸æ¸…æ¥š ğŸ˜‚ï¼Œäºæ˜¯å»ç™¾åº¦å„ç§ top è¯¦è§£ä¹‹ç±»ï¼Œä¸ºäº†åŠ æ·±å°è±¡ï¼Œäºæ˜¯è‡ªå·±è¯¦ç»†è®°å½•ä¸‹è¿™ä¸ªâ€œtopâ€çš„çŸ¥è¯†ç‚¹ã€‚

ä¸‹å›¾æ˜¯æˆ‘ç”»çš„å„ç§ top æ ‡æ³¨å›¾è§£ï¼ˆoffsetTop[top]ï¼ŒscrollTopï¼ŒclientTopï¼‰

![ä¸€ä¸ªå…ƒç´ å„ç§topå›¾è§£](https://cdn.jsdelivr.net/gh/liuxingyu521/pictureBed@picture/blog/element-top.png)

# æ­£é¤

## 1. offsetTop

`element.offsetTop` å’Œ css é‡Œçš„`top`å±æ€§å¾ˆç›¸ä¼¼ï¼Œéƒ½æ˜¯ç›¸å¯¹äºçˆ¶çº§å…ƒç´ ï¼ˆæœ‰é static å®šä½å±æ€§çš„ï¼‰å®šä½ï¼Œå¦‚æœçˆ¶çº§å¾€ä¸Šéƒ½æ²¡æœ‰å®šä½å±æ€§åˆ™ç›¸å¯¹äº**body**å·¦ä¸Šè§’å®šä½ã€‚

**æ³¨æ„ï¼šelement.offsetTop æ˜¯ä¸€ä¸ªåªè¯»å±æ€§**

```javascript
// åŸç”Ÿjs
var ot = document.getElementById("div").offsetTop;
// è¿”å›Numberå€¼

// jquery
var ot = $("#div").offset().top;
```

## 2. scrollTop

`scrollTop` æ˜¯**å¯æ»šåŠ¨å…ƒç´ **å‚ç›´æ–¹å‘å·²æ»šåŠ¨çš„é«˜åº¦ï¼Œè¿™ä¸ªå±æ€§æ—¢å¯ä»¥**æŸ¥è¯¢**ä¹Ÿå¯ä»¥**è®¾ç½®**ï¼Œä¾‹å¦‚

```javascript
var sTop = document.getElementById("div").scrollTop;
// è¿”å›Numberå€¼

// è®¾ç½®ï¼Œæ»šåŠ¨åˆ°50pxå¤„
document.getElementById("div").scrollTop = 50;
```

- å¦‚æœå…ƒç´ ä¸å¯æ»šåŠ¨ï¼ŒscrollTop = 0
- å¦‚æœè®¾ç½®çš„ scrollTop å€¼å°äº 0ï¼ŒscrollTop = 0
- å¦‚æœè®¾ç½®çš„ scrollTop å€¼å¤§äºå¯ä»¥æ»šåŠ¨çš„æœ€å¤§å€¼ï¼Œåˆ™ scrollTop = å¯æ»šåŠ¨çš„æœ€å¤§å€¼

## 3. clientTop

`clientTop` æ˜¯ä¸€ä¸ªå…ƒç´ çš„ border-top çš„å®½åº¦ï¼Œæ˜¯ä¸€ä¸ª**åªè¯»**å±æ€§ã€‚

## 4. å¸é¡¶å®æˆ˜

```javascript
// ç»™ç›®å½•å¢åŠ æ»šåŠ¨å¸é¡¶æ•ˆæœ
// ä½¿ç”¨.Xuer-slide-contentç±»è¿›è¡Œå®šä½
$(window).scroll(function () {
	var slideTop = $(".Xuer-slide-content").offset().top;
	var bodySrollTop = $("html").scrollTop();

	// æ»šåŠ¨è·ç¦»å¤§äºå…ƒç´ è·ç¦»ï¼Œå¸é¡¶å›ºå®š
	if (bodySrollTop > slideTop) {
		$("#toc").addClass("fixed");
	}
	// æ»šåŠ¨è·ç¦»å°äºå…ƒç´ è·ç¦»ï¼Œåœ¨å›åˆ°åŸæ¥æ–‡æ¡£ä½ç½®
	else {
		$("#toc").removeClass("fixed");
	}
});
```
