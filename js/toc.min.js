!function(h){h.fn.toc=function(e){var n=h.extend({noBackToTopLinks:!1,title:"<i>Content 目录</i>",minimumHeaders:3,headers:"h1, h2, h3, h4, h5, h6",listType:"ol",showEffect:"show",showSpeed:"slow",classes:{list:"",item:""},wrapDomSelector:".post-container"},e);function s(e){var t,o=void 0===e.textContent?e.innerText:e.textContent;return"<a href='#"+(t=e.id,decodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)}))+"'>"+o+"</a>"}var t=h(n.headers,h(n.wrapDomSelector)).filter(function(){var e=h(this).prev().attr("name");return!this.id&&e&&(this.id=h(this).attr("id",e.replace(/\./g,"-"))),this.id}),o=h(this);if(!t.length||t.length<n.minimumHeaders||!o.length)h(this).hide();else{0===n.showSpeed&&(n.showEffect="none");function i(e){return parseInt(e.nodeName.replace("H",""),10)}var c,a={show:function(){o.hide().html(d).show(n.showSpeed)},slideDown:function(){o.hide().html(d).slideDown(n.showSpeed)},fadeIn:function(){o.hide().html(d).fadeIn(n.showSpeed)},none:function(){o.html(d)}},l=t.map(function(e,t){return i(t)}).get().sort()[0],r=i(t[0]),d=n.title+" <"+n.listType+' class="'+n.classes.list+'">';t.on("click",function(){n.noBackToTopLinks||(window.location.hash=this.id)}).addClass("clickable-header").each(function(e,t){if(c=i(t),n.noBackToTopLinks||c!==l||h(t).addClass("top-level-header").after('<i class="icon-arrow-up back-to-top"> </i>'),c===r)d+='<li class="'+n.classes.item+'">'+s(t);else if(c<=r){for(var o=c;o<r;o++)d+="</li></"+n.listType+">";d+='<li class="'+n.classes.item+'">'+s(t)}else if(r<c){for(o=c;r<o;o--)d+="<"+n.listType+' class="'+n.classes.list+'"><li class="'+n.classes.item+'">';d+=s(t)}r=c}),d+="</"+n.listType+">",n.noBackToTopLinks||h(document).on("click",".back-to-top",function(){h(window).scrollTop(0),window.location.hash=""}),a[n.showEffect]()}}}(jQuery),$(document).ready(function(){$("#toc").toc({listType:"ul",wrapDomSelector:".post-container"}),$(window).scroll(function(){var e=$(".Xuer-slide-content").offset().top,t=$(document).scrollTop();e<t?$("#toc").addClass("fixed"):$("#toc").removeClass("fixed");for(var o,n=$("#toc a"),s=$(window).height(),i=0,c=n.length;i<c;i++)if(t<(o=$(decodeURIComponent(n[i].hash)).offset().top)&&o<t+s){$("#toc a").removeClass("current"),$(n[i]).addClass("current");break}}),$("#toc a").click(function(){$("html").animate({scrollTop:$(decodeURIComponent($(this).attr("href"))).offset().top-20},500),setTimeout(function(){$("#toc a").removeClass("current"),$(this).addClass("current")}.bind(this),600)})});