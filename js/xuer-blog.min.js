function throttle(s,i){var a=null;return function(){var e=this,t=arguments;a=a||setTimeout(function(){a=null,s.apply(e,t)},i)}}$(function(){$("[data-toggle='tooltip']").tooltip(),$("table").wrap("<div class='table-responsive'></div>"),$("table").addClass("table"),$('iframe[src*="youtube.com"]').wrap('<div class="embed-responsive embed-responsive-16by9"></div>'),$('iframe[src*="youtube.com"]').addClass("embed-responsive-item"),$('iframe[src*="vimeo.com"]').wrap('<div class="embed-responsive embed-responsive-16by9"></div>'),$('iframe[src*="vimeo.com"]').addClass("embed-responsive-item");if(1170<$(window).width()){var t=$(".navbar-custom").height();$(window).on("scroll",{previousTop:0},function(){var e=$(window).scrollTop();e<this.previousTop?0<e&&$(".navbar-custom").hasClass("is-fixed")?$(".navbar-custom").addClass("is-visible"):$(".navbar-custom").removeClass("is-visible is-fixed"):($(".navbar-custom").removeClass("is-visible"),t<e&&!$(".navbar-custom").hasClass("is-fixed")&&$(".navbar-custom").addClass("is-fixed")),this.previousTop=e})}$(".searchInput").on("input propertychange",throttle(function(e){var s,o=e.target.value;s=sessionStorage.getItem("local-blogs-data"),new Promise(function(a,t){if(s)try{var e=JSON.parse(s);a(e)}catch(e){console.error("本地博客数据解析出错",e)}else $.ajax({url:"/feed.xml",type:"get"}).then(function(e){var t=e.getElementsByTagName("item"),s=[].slice.call(t).map(function(e){var t=e.getElementsByTagName("title")[0].textContent,s=e.getElementsByTagName("link")[0].textContent,i=e.getElementsByTagName("pubDate")[0].textContent;return{title:t,link:s,description:e.getElementsByTagName("description")[0].textContent.replace(/<.*?>/g," ").replace(/\s+/g," "),pubDate:new Date(i).toLocaleString()}}),i=JSON.stringify(s);sessionStorage.setItem("local-blogs-data",i),a(s)},function(e){t(e)})}).then(function(e){var t,s,i=(t=e,(s=o)&&t.filter(function(e){return-1<e.description.search(new RegExp(s))}).map(function(e){var t=e.description.search(new RegExp(s));return e.desc="... "+e.description.substr(t<8?0:t-8,20).replace(new RegExp(s),"<strong>"+s+"</strong>"),e})||[]),a=i.map(function(e,t){return'<li data-url="'+e.link+'"><div class="search-bar__result-box__list-title">'+(t+1)+"、"+e.title+'</div><div class="search-bar__result-box__list-content">'+e.desc+"</div></li>"}).join(""),n=0<i.length?"搜索到 "+i.length+" 条相关文章":o?"暂无相关文章内容，换个词叭～":"开始搜索吧∼";$(".searchBox ul").empty().append($(a)),$(".searchBox .searchTip").text(n)})},500)),$(".searchInput").on("focus",function(){$(this).trigger("change"),$(".searchBox").slideDown("fast")}),$(".searchInput").on("blur",function(){setTimeout(function(){$(".searchBox").slideUp("fast")},200)}),$(".searchBox").on("click","li",function(){setTimeout(function(){location.href=$(this).data("url")}.bind(this),200)})});